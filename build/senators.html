<!DOCTYPE html>

<html lang="en">
<!-- templated based on HTML5 Boilderplate: https://github.com/h5bp/html5-boilerplate/blob/master/index.html -->

<head>
  <meta charset="utf-8" />
  <!-- Usage: <title>XXX | Building Bridges UTD</title> -->
  <title>Senators | Building Bridges UTD</title>
  <meta name="description" content="Online information about the Building Bridges student government coalition, running in Spring 2014 at the University of Texas-Dallas." />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="img/png" href="static/img/favicon.png" />

  <!-- Styles
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <link rel="stylesheet" href="lib/bootstrap-sass-3.1.1/stylesheets/bootstrap.css" />
  <link rel="stylesheet" href="static/css/angersBridge.css" />

</head>

<body class="container">
  <!-- Header
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <header class="mainHeader">
    <h1 class="title">
      <img class="logo img-responsive" src="static/img/logo.jpg" alt="Brooks &amp; Bank: Building Bridges" />
    </h1>

    <nav class="mainMenu">
      <ul class="nav nav-pills nav-up nav-justified">
        <li><a href="index.html">Home</a></li>
        <li><a href="pres-n-vice.html">Pres &amp; Vice</a></li>
        <li><a href="senators.html" class="active">Senators</a></li>
      </ul>
    </nav>
  </header>

  <!-- Content
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <article class="mainContent">
    <div id="filters" class="filters">
      <div id="filter-year" class="filter filter-year">
        <span>Filter by year:</span>

        <div class="btn-group">
          <button data-year="all" type="button" class="btn btn-default active">All</button>
          <button data-year="Class of 2017" type="button" class="btn btn-default">Freshmen</button>
          <button data-year="Class of 2016" type="button" class="btn btn-default">Sophomores</button>
          <button data-year="Class of 2015" type="button" class="btn btn-default">Juniors</button>
          <button data-year="Graduate Student" type="button" class="btn btn-default">Grad Students</button>
        </div>
      </div>

    </div>

    <div id="senators" class="senators">
      <!-- content filled by js, see inline script below -->
    </div>

    <div id="contentLoadFailure" class="alert alert-danger error-condition">
      <p>
        Unfortunately we seem to be having technical issues and cannot load the
        senator's data.
      </p>
      <p>
        <a href="mailto:buildbridgesutd@gmail.com?subject=Website Error - Building Bridges UTD">
        Please email us</a> to let us know about the issue. :)
      </p>
    </div>

  </article>

  <!-- Footer
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <footer class="mainFooter">
    <nav class="sharing">
      <ul class="nav nav-pills nav-down">
        <li><a href="mailto:buildbridgesutd@gmail.com"><img class="icon" src="lib/doodle-social-media-icons/contact.png" alt="Email Us" /></a></li>
        <li><a href="https://twitter.com/BuildBridgesUTD" target="new"><img class="icon" src="lib/doodle-social-media-icons/twitter.png" alt="Twitter" /></a></li>
        <li><a href="https://www.facebook.com/buildingbridges14" target="new"><img class="icon" src="lib/doodle-social-media-icons/facebook.png" alt="Facebook" /></a></li>
      </ul>
    </nav>

    <p class="signature">
      Made in Sweden with
      <span id="hearts">
        <img class="heart" src="lib/img/heart.png" alt="&lt;3 (red)" />
        <img class="heart" src="static/img/heart/light-orange-FAA00A.png" alt="&lt;3 (light orange)" />
        <img class="heart" src="static/img/heart/dark-orange-F05A00.png" alt="&lt;3 (dark orange)" />
        <img class="heart" src="static/img/heart/green-008C52.png" alt="&lt;3 (green)" />
      </span>
      for my sister Nancy
    </p>
    <p class="copyright"><small><a href="https://github.com/jtfairbank/UTD-Student-Elections-2014/blob/master/COPYRIGHT.md">Copyright</a></small></p>
  </footer>


  <!-- Scripts
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <script src="lib/jquery/jquery-2.1.0.min.js"></script>
  <script src="lib/jquery-csv/jquery.csv.js"></script>
  <script src="static/js/Senator.js"></script>
  <script src="static/js/bigFourBridge.js"></script>

  <script>
  // hearts
  $(function() {
    'use strict';

    // TODO: test for multiple .hearts modules on one page- the elements may
    //       all be included in $hearts, but I need to blink them at a per
    //       module level, not globally
    //
    //       Ok for now, since we only have one .hearts.  I'll give it an id,
    //       just to make it clear only one can be on a page now.  This is
    //       actually a slightly faster approach (selecting an id), though it
    //       doesn't matter at this scale.
    //
    //       overengineering ;)

    // TODO: test
    //
    //       manual testing- it looks like it works *shrug*
    //
    //       Test efficiency on mobile- don't want to kill batter.  Once again,
    //       overengineering at this scale, but certainly a concern with larger
    //       more complex interfaces.  Or ones that take a lot of processing
    //       power already (network i/o).
    var switchHearts_IntervalID;
    var $hearts = $("#hearts > .heart");
    var show = 0;

    var switcheroo = function () {
      show++;
      if (show == $hearts.length) {
        show = 0;
      }

      $hearts.each(function(i) {
        if (i == show) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });
    };

    switchHearts_IntervalID = setInterval(switcheroo, 1000);

  });
  </script>

  <script>
  // senators
  $(function() {
    'use strict';

    var senators = [];


    /* Setup
     * ------------------------------------------------------ */
    $("#filter-year .btn").on('click.removeClassActive', function() {
      $("#filter-year .btn").removeClass('active');
      $("#filter-year .btn").off('click.removeClassActive');
    });


    /* Load Senators
     * ------------------------------------------------------ */
    $.get("static/data/senators.csv")
      .done(function(senatorsCSV) {
        senators = Senator.importAllFromCSV(senatorsCSV);
        senators = senators.sort(Senator.compareName);

        for (var i = 0; i < senators.length; i++) {
          var senator = senators[i];
          var $senator = senator.getOverview();
          $senator.data('index', i);
          $("#senators").append($senator);
        }

        $("#filters").show();
        $("#senators").show();
        $("#contentLoadFailure").hide();
      })

      .fail(function() {
        $("#filters").hide();
        $("#senators").hide();
        $("#contentLoadFailure").show();
        // TODO: automated bug report
      });


    /* Filters
     * ------------------------------------------------------ */
    $("#filter-year .btn").click(function() {
      var year = $(this).data('year');

      $(".senator").each(function() {
        var i = $(this).data('index');
        var senator = senators[i];

        if (year == "all" || year == senator.year) {
          $(this).show();
        } else {
          $(this).hide();
        }
      });

    });


  });
  </script>

  <!-- TODO: google analytics -->
</body>

</html>